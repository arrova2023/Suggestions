# Suggest Nearby Cities REST API

This REST API provides suggestions for nearby cities based on the name of the location, its latitude, and longitude.

## Usage

**REST API Consumption Validation URL**

**Type:** GET

http://localhost:8080/suggestions?q=london&lat=42.98339&lon=-81.23304


**URL Parameter Values**

- `q`: Location name (String)
- `lat`: Latitude (Float > 0)
- `lon`: Longitude (Float < 0)

**Response Format**

The response generated by the API consumption will have a format similar to the following:

```json
[
    {
        "name": "london : America/Toronto",
        "latitude": 42.98339,
        "longitude": -81.23304,
        "score": 1.0
    },
    {
        "name": "london : America/New_York",
        "latitude": 39.88645,
        "longitude": -83.44825,
        "score": 0.002552867223175697
    },
    {
        "name": "london : America/New_York",
        "latitude": 37.12898,
        "longitude": -84.08326,
        "score": 0.0014376255204344688
    }
]
```
Explanation:

In each nesting of variables, we have the following variables:

name: Name of the location most closely related to the location entered by the user in the q variable in the URL.
latitude: Latitude
longitude: Longitude
score: The confidence level indicating whether the location entered by the user is correct or not.
This REST API is used to detect the closest locations with points of interest for a user and works as follows:

There is a database with names of locations and their respective latitude and longitude, containing thousands of points in Canada and the United States of America. While the service primarily focuses on North American users, the database can accommodate locations with points of interest worldwide. In the example provided, a user looking for a location called "london" at the coordinates 42.98339 latitude and -81.23304 longitude had a successful match with their query. Additionally, 2 more locations were found, but in different areas. The scores indicate that the relationship of the location name with the latitude and longitude entered by the user does not match other locations. This computational model automatically learns that the user's known location is in "Canada."

This was accomplished using an algorithm based on two feature extraction stages. The first stage employed the Cosine function, and the second stage utilized the SemiVersine function. The structure of the REST API is explained in detail below.

Feature Extraction

Taking into account the structure of the database named "cities_canada-usa.tsv," the first stage of feature extraction involves two techniques:

Cosine:
In this stage, the Cosine Similarity technique is used to analyze, search, and retrieve information. The user-entered location name (q) is compared with the names of all locations in the database (cities_canada-usa.tsv). If one or more locations with related names (similar or identical) are found, they are retrieved. Alongside, their respective latitude and longitude (lat and lon) are also recovered.

Semiversene:
In this stage, the Semiversene formula is applied. By utilizing the radius of the Earth (6371 km) as a reference, this formula generates a degree of similarity/difference between the latitude and longitude entered by the user in comparison to the latitude and longitude of the locations retrieved in the previous stage (cosine).

The design of this REST API is geometric in nature, as two concepts used for trigonometric functions contribute to generating the confidence measure (score). These concepts are explained below:

Cosine:
Cosine similarity measures the existing similarity between two vectors in a space with an inner product. The cosine of the included angle between the vectors is evaluated. A value of 1 indicates that the vectors point in the same direction, and the value decreases as the angle increases. The cosine value vanishes when vectors are orthogonal, and it's -1 when they point in opposite directions. This metric's value ranges between -1 and 1.# Suggestions
